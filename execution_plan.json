{
  "execution_plan": {
    "phase_id": "Unified Test Generation",
    "waves": [
      {
        "wave_id": 1,
        "strategy": "PARALLEL_SWARM",
        "rationale": "Wave 1: 11 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T001",
            "agent_role": "Developer",
            "instruction": "T001 Confirm active branch is `005-unified-test-gen` and `npm test` reports 273/273 passing before any changes (baseline validation)",
            "file_locks": [],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T001 Confirm active branch is `005-unified-test-gen` and `npm test` reports 273/273 passing before any changes (baseline validation)' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T002",
            "agent_role": "Developer",
            "instruction": "T002 Create `src/helpers/test-generator.ts` with module docblock, imports (`path`, `fs/promises`, `glob`, `ProviderRouter`, `Message`), and export the two interface stubs (`TestGeneratorOptions`, `TestGeneratorResult`) \u2014 no function bodies yet",
            "file_locks": [
              "src/helpers/test-generator.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T002 Create `src/helpers/test-generator.ts` with module docblock, imports (`path`, `fs/promises`, `glob`, `ProviderRouter`, `Message`), and export the two interface stubs (`TestGeneratorOptions`, `TestGeneratorResult`) \u2014 no function bodies yet' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T008",
            "agent_role": "Developer",
            "instruction": "T008 Verify foundational checkpoint: run `npx tsc --noEmit` (0 errors) and `npm test` (273/273 pass) \u2014 do NOT proceed to user story phases until both pass",
            "file_locks": [],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T008 Verify foundational checkpoint: run `npx tsc --noEmit` (0 errors) and `npm test` (273/273 pass) \u2014 do NOT proceed to user story phases until both pass' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T009",
            "agent_role": "Developer",
            "instruction": "T009 [US1] Write unit test group `describe('generateTestFile')` in `tests/unit/helpers/test-generator.test.ts` \u2014 9 cases: router.complete() called with `provider: 'anthropic'`; default model is `claude-sonnet-4-20250514`; model override honored when `options.model` set; `fs.writeFile` called with resolved path and extracted code; returns correct `testCommand` for vitest; returns correct `testCommand` for pytest; throws when `.rs` target resolved (null path); includes up to 2 example contents in messages when available; falls back to package.json block when no examples",
            "file_locks": [
              "tests/unit/helpers/test-generator.test.ts",
              "options.model",
              "fs.writeFile",
              "package.json"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T009 [US1] Write unit test group `describe('generateTestFile')` in `tests/unit/helpers/test-generator.test.ts` \u2014 9 cases: router.complete() called with `provider: 'anthropic'`; default model is `claude-sonnet-4-20250514`; model override honored when `options.model` set; `fs.writeFile` called with resolved path and extracted code; returns correct `testCommand` for vitest; returns correct `testCommand` for pytest; throws when `.rs` target resolved (null path); includes up to 2 example contents in messages when available; falls back to package.json block when no examples' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T012",
            "agent_role": "Developer",
            "instruction": "T012 [US1] Add `generate?: boolean` field to `RunOptions` interface in `src/cli/commands/run.ts` (after `tierConfig?: string` field, line ~79)",
            "file_locks": [
              "src/cli/commands/run.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T012 [US1] Add `generate?: boolean` field to `RunOptions` interface in `src/cli/commands/run.ts` (after `tierConfig?: string` field, line ~79)' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T014",
            "agent_role": "Developer",
            "instruction": "T014 [US1] Verify US1 acceptance gate: run `npm test` (273+ pass), `npx tsc --noEmit` (0 errors), smoke test `quickstart.md Test 1` (test file created and loop runs)",
            "file_locks": [
              "quickstart.md"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T014 [US1] Verify US1 acceptance gate: run `npm test` (273+ pass), `npx tsc --noEmit` (0 errors), smoke test `quickstart.md Test 1` (test file created and loop runs)' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T016",
            "agent_role": "Developer",
            "instruction": "T016 [US2] Confirm `findExistingTests()` (implemented in T010) correctly handles all passthrough patterns \u2014 no new code needed; verify via unit tests from T015 that all 5 patterns pass",
            "file_locks": [],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T016 [US2] Confirm `findExistingTests()` (implemented in T010) correctly handles all passthrough patterns \u2014 no new code needed; verify via unit tests from T015 that all 5 patterns pass' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T018",
            "agent_role": "Developer",
            "instruction": "T018 [US3] Add `--no-generate` option to the `run` command in `src/cli/ralph-loop.ts` after the existing `--tier-config` option (~line 84): `.option('--no-generate', 'Skip automatic test file generation when no test file exists')`",
            "file_locks": [
              "src/cli/ralph-loop.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T018 [US3] Add `--no-generate` option to the `run` command in `src/cli/ralph-loop.ts` after the existing `--tier-config` option (~line 84): `.option('--no-generate', 'Skip automatic test file generation when no test file exists')`' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T024",
            "agent_role": "Developer",
            "instruction": "T024 [US5] Confirm `resolveTestFilePath()` (implemented in T003) handles all 6 cases \u2014 no new code needed; verify via unit tests from T023 that all cases pass",
            "file_locks": [],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T024 [US5] Confirm `resolveTestFilePath()` (implemented in T003) handles all 6 cases \u2014 no new code needed; verify via unit tests from T023 that all cases pass' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T027",
            "agent_role": "Developer",
            "instruction": "T027 Run full combined acceptance gate: `npm test` (all 273 original + all new unit tests pass), `npx tsc --noEmit` (0 errors) \u2014 MUST pass before proceeding",
            "file_locks": [],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T027 Run full combined acceptance gate: `npm test` (all 273 original + all new unit tests pass), `npx tsc --noEmit` (0 errors) \u2014 MUST pass before proceeding' to [x]",
            "dependencies": []
          },
          {
            "task_id": "T028",
            "agent_role": "Developer",
            "instruction": "T028 Commit all changes: `feat: add unified test generation for ma-loop \u2014 auto-generates tests when none exist`",
            "file_locks": [],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T028 Commit all changes: `feat: add unified test generation for ma-loop \u2014 auto-generates tests when none exist`' to [x]",
            "dependencies": []
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 1 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      },
      {
        "wave_id": 2,
        "strategy": "PARALLEL_SWARM",
        "rationale": "Wave 2: 4 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T003",
            "agent_role": "Developer",
            "instruction": "T003 Implement `resolveTestFilePath(targetFile: string, framework: string): string | null` (NOT exported) in `src/helpers/test-generator.ts` \u2014 maps `.ts`\u2192`.test.ts`, `.js`\u2192`.test.js`, `.py`\u2192`test_{name}.py`, `.rs`\u2192`null`, `.rb`\u2192`{name}_spec.rb`, other\u2192`.test.{ext}`, all in same directory as target",
            "file_locks": [
              "{name}_spec.rb",
              "test.ts",
              "test.js",
              ".test.js",
              "src/helpers/test-generator.ts",
              ".test.ts",
              "test_{name}.py",
              "_spec.rb"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T003 Implement `resolveTestFilePath(targetFile: string, framework: string): string | null` (NOT exported) in `src/helpers/test-generator.ts` \u2014 maps `.ts`\u2192`.test.ts`, `.js`\u2192`.test.js`, `.py`\u2192`test_{name}.py`, `.rs`\u2192`null`, `.rb`\u2192`{name}_spec.rb`, other\u2192`.test.{ext}`, all in same directory as target' to [x]",
            "dependencies": [
              "T002"
            ]
          },
          {
            "task_id": "T013",
            "agent_role": "Developer",
            "instruction": "T013 [US1] Insert generation block in `src/cli/commands/run.ts` after `prepareRunParameters()` call (~line 111) and BEFORE `initializeInfrastructure()` call (~line 113) \u2014 dynamic import `test-generator`, call `findExistingTests`, branch on result: if null and not `.rs` call `generateTestFile` and update `params.testCommand`, else log \"Using existing tests:\", wrap generate call in try/catch to warn-and-continue on LLM failure",
            "file_locks": [
              "src/cli/commands/run.ts",
              "params.testCommand"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T013 [US1] Insert generation block in `src/cli/commands/run.ts` after `prepareRunParameters()` call (~line 111) and BEFORE `initializeInfrastructure()` call (~line 113) \u2014 dynamic import `test-generator`, call `findExistingTests`, branch on result: if null and not `.rs` call `generateTestFile` and update `params.testCommand`, else log \"Using existing tests:\", wrap generate call in try/catch to warn-and-continue on LLM failure' to [x]",
            "dependencies": [
              "T012"
            ]
          },
          {
            "task_id": "T017",
            "agent_role": "Developer",
            "instruction": "T017 [US2] Verify US2 acceptance gate: run `npm test` (273+ pass), smoke test `quickstart.md Test 2` (logs \"Using existing tests:\", NO new file written)",
            "file_locks": [
              "quickstart.md"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T017 [US2] Verify US2 acceptance gate: run `npm test` (273+ pass), smoke test `quickstart.md Test 2` (logs \"Using existing tests:\", NO new file written)' to [x]",
            "dependencies": [
              "T014"
            ]
          },
          {
            "task_id": "T019",
            "agent_role": "Developer",
            "instruction": "T019 [US3] Update `run` command description in `src/cli/ralph-loop.ts` line 35 from `'Run Ralph Loop iterations for a file or objective'` to `'Run Ralph Loop iterations for a file or objective (auto-generates tests if none exist)'`",
            "file_locks": [
              "src/cli/ralph-loop.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T019 [US3] Update `run` command description in `src/cli/ralph-loop.ts` line 35 from `'Run Ralph Loop iterations for a file or objective'` to `'Run Ralph Loop iterations for a file or objective (auto-generates tests if none exist)'`' to [x]",
            "dependencies": [
              "T018"
            ]
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 2 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      },
      {
        "wave_id": 3,
        "strategy": "PARALLEL_SWARM",
        "rationale": "Wave 3: 3 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T004",
            "agent_role": "Developer",
            "instruction": "T004 Implement `extractCodeBlock(raw: string): string` (NOT exported) in `src/helpers/test-generator.ts` \u2014 finds first ` ``` ` fence, skips optional language specifier line, reads until closing ` ``` `, returns trimmed content; returns `raw.trim()` if no fence found",
            "file_locks": [
              "src/helpers/test-generator.ts",
              "raw.trim"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T004 Implement `extractCodeBlock(raw: string): string` (NOT exported) in `src/helpers/test-generator.ts` \u2014 finds first ` ``` ` fence, skips optional language specifier line, reads until closing ` ``` `, returns trimmed content; returns `raw.trim()` if no fence found' to [x]",
            "dependencies": [
              "T003",
              "T002"
            ]
          },
          {
            "task_id": "T015",
            "agent_role": "Developer",
            "instruction": "T015 [US2] Add unit test group `describe('findExistingTests')` in `tests/unit/helpers/test-generator.test.ts` \u2014 5 cases: returns null when no `.test.ts` file exists; returns path when `foo.test.ts` exists adjacent; returns path when `foo.spec.ts` exists adjacent; always returns null for `.rs` files; returns path for `test_foo.py` prefix convention (Python)",
            "file_locks": [
              "test.ts",
              "tests/unit/helpers/test-generator.test.ts",
              "foo.test.ts",
              "foo.spec.ts",
              ".test.ts",
              "test_foo.py"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T015 [US2] Add unit test group `describe('findExistingTests')` in `tests/unit/helpers/test-generator.test.ts` \u2014 5 cases: returns null when no `.test.ts` file exists; returns path when `foo.test.ts` exists adjacent; returns path when `foo.spec.ts` exists adjacent; always returns null for `.rs` files; returns path for `test_foo.py` prefix convention (Python)' to [x]",
            "dependencies": [
              "T009",
              "T003"
            ]
          },
          {
            "task_id": "T020",
            "agent_role": "Developer",
            "instruction": "T020 [US3] Verify US3 acceptance gate: run `npx ralph-loop run --help` and confirm `--no-generate` appears; run `npm test` (273+ pass); smoke test `quickstart.md Test 3` (no file generated with `--no-generate`)",
            "file_locks": [
              "quickstart.md"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T020 [US3] Verify US3 acceptance gate: run `npx ralph-loop run --help` and confirm `--no-generate` appears; run `npm test` (273+ pass); smoke test `quickstart.md Test 3` (no file generated with `--no-generate`)' to [x]",
            "dependencies": [
              "T017",
              "T014"
            ]
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 3 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      },
      {
        "wave_id": 4,
        "strategy": "PARALLEL_SWARM",
        "rationale": "Wave 4: 3 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T005",
            "agent_role": "Developer",
            "instruction": "T005 Implement `buildTestCommand(testFilePath: string, framework: string): string` (NOT exported) in `src/helpers/test-generator.ts` \u2014 vitest\u2192`npx vitest run {basename-no-ext}`, jest\u2192`npx jest {basename-no-ext} --no-watch`, pytest\u2192`pytest {relativeTestFilePath}`, mocha\u2192`npx mocha {testFilePath}`, rspec\u2192`bundle exec rspec {testFilePath}`, cargo/custom\u2192`npm test` fallback",
            "file_locks": [
              "src/helpers/test-generator.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T005 Implement `buildTestCommand(testFilePath: string, framework: string): string` (NOT exported) in `src/helpers/test-generator.ts` \u2014 vitest\u2192`npx vitest run {basename-no-ext}`, jest\u2192`npx jest {basename-no-ext} --no-watch`, pytest\u2192`pytest {relativeTestFilePath}`, mocha\u2192`npx mocha {testFilePath}`, rspec\u2192`bundle exec rspec {testFilePath}`, cargo/custom\u2192`npm test` fallback' to [x]",
            "dependencies": [
              "T003",
              "T002",
              "T004"
            ]
          },
          {
            "task_id": "T021",
            "agent_role": "Developer",
            "instruction": "T021 [US4] Confirm the `!options.test` guard in the generation block (inserted in T013) correctly skips generation when `--test` is provided \u2014 no new code needed; verify by reading the block and smoke-testing `quickstart.md Test 4`",
            "file_locks": [
              "quickstart.md",
              "options.test",
              "!options.test"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T021 [US4] Confirm the `!options.test` guard in the generation block (inserted in T013) correctly skips generation when `--test` is provided \u2014 no new code needed; verify by reading the block and smoke-testing `quickstart.md Test 4`' to [x]",
            "dependencies": [
              "T017",
              "T020",
              "T014"
            ]
          },
          {
            "task_id": "T023",
            "agent_role": "Developer",
            "instruction": "T023 [US5] Add unit test group `describe('resolveTestFilePath')` in `tests/unit/helpers/test-generator.test.ts` \u2014 6 cases: `.ts`\u2192`.test.ts` in same dir; `.js`\u2192`.test.js` in same dir; `.py`\u2192`test_{name}.py` in same dir; `.rs`\u2192`null`; `.rb`\u2192`{name}_spec.rb` in same dir; nested path `src/util/math.ts`\u2192`src/util/math.test.ts`",
            "file_locks": [
              "{name}_spec.rb",
              "test.ts",
              "test.js",
              "tests/unit/helpers/test-generator.test.ts",
              ".test.js",
              "src/util/math.test.ts",
              "src/util/math.ts",
              ".test.ts",
              "test_{name}.py",
              "_spec.rb"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T023 [US5] Add unit test group `describe('resolveTestFilePath')` in `tests/unit/helpers/test-generator.test.ts` \u2014 6 cases: `.ts`\u2192`.test.ts` in same dir; `.js`\u2192`.test.js` in same dir; `.py`\u2192`test_{name}.py` in same dir; `.rs`\u2192`null`; `.rb`\u2192`{name}_spec.rb` in same dir; nested path `src/util/math.ts`\u2192`src/util/math.test.ts`' to [x]",
            "dependencies": [
              "T015",
              "T009",
              "T003"
            ]
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 4 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      },
      {
        "wave_id": 5,
        "strategy": "PARALLEL_SWARM",
        "rationale": "Wave 5: 3 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T006",
            "agent_role": "Developer",
            "instruction": "T006 Implement `gatherExampleTests(workingDir: string): Promise<string[]>` (NOT exported) in `src/helpers/test-generator.ts` \u2014 globs `**/*.{test,spec}.{ts,js,py,rb}` ignoring `node_modules`, `dist`, `.git`; reads up to 2 files; returns array of content strings",
            "file_locks": [
              "src/helpers/test-generator.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T006 Implement `gatherExampleTests(workingDir: string): Promise<string[]>` (NOT exported) in `src/helpers/test-generator.ts` \u2014 globs `**/*.{test,spec}.{ts,js,py,rb}` ignoring `node_modules`, `dist`, `.git`; reads up to 2 files; returns array of content strings' to [x]",
            "dependencies": [
              "T005",
              "T003",
              "T002",
              "T004"
            ]
          },
          {
            "task_id": "T022",
            "agent_role": "Developer",
            "instruction": "T022 [US4] Verify US4 acceptance gate: smoke test `quickstart.md Test 4` (generation skipped when `--test` provided); run `npm test` (273+ pass)",
            "file_locks": [
              "quickstart.md"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T022 [US4] Verify US4 acceptance gate: smoke test `quickstart.md Test 4` (generation skipped when `--test` provided); run `npm test` (273+ pass)' to [x]",
            "dependencies": [
              "T017",
              "T020",
              "T014",
              "T021"
            ]
          },
          {
            "task_id": "T026",
            "agent_role": "Developer",
            "instruction": "T026 [P] Add unit test group `describe('extractCodeBlock')` in `tests/unit/helpers/test-generator.test.ts` \u2014 4 cases: extracts from ` ```typescript ``` ` fence; extracts from ` ```python ``` ` fence; returns raw string when no fence present; handles ` ``` ` without language specifier",
            "file_locks": [
              "tests/unit/helpers/test-generator.test.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T026 [P] Add unit test group `describe('extractCodeBlock')` in `tests/unit/helpers/test-generator.test.ts` \u2014 4 cases: extracts from ` ```typescript ``` ` fence; extracts from ` ```python ``` ` fence; returns raw string when no fence present; handles ` ``` ` without language specifier' to [x]",
            "dependencies": [
              "T015",
              "T009",
              "T023"
            ]
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 5 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      },
      {
        "wave_id": 6,
        "strategy": "PARALLEL_SWARM",
        "rationale": "Wave 6: 2 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T007",
            "agent_role": "Developer",
            "instruction": "T007 Implement `buildGenerationMessages(targetFile, targetContent, objective, testFilePath, exampleTests, packageJson): Message[]` (NOT exported) in `src/helpers/test-generator.ts` \u2014 returns `[systemMsg, userMsg]` per the prompt design in `contracts/test-generator-api.md`; includes `<examples>` block if examples exist, else `<package-json>` block if packageJson non-empty",
            "file_locks": [
              "src/helpers/test-generator.ts",
              "contracts/test-generator-api.md"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T007 Implement `buildGenerationMessages(targetFile, targetContent, objective, testFilePath, exampleTests, packageJson): Message[]` (NOT exported) in `src/helpers/test-generator.ts` \u2014 returns `[systemMsg, userMsg]` per the prompt design in `contracts/test-generator-api.md`; includes `<examples>` block if examples exist, else `<package-json>` block if packageJson non-empty' to [x]",
            "dependencies": [
              "T005",
              "T004",
              "T003",
              "T002",
              "T006"
            ]
          },
          {
            "task_id": "T025",
            "agent_role": "Developer",
            "instruction": "T025 [US5] Verify US5 acceptance gate: run `npm test` (273+ pass), `npx tsc --noEmit` (0 errors); smoke tests `quickstart.md Test 5` (Rust skipped) and `quickstart.md Test 6` (Python `test_math.py` naming)",
            "file_locks": [
              "quickstart.md",
              "test_math.py"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T025 [US5] Verify US5 acceptance gate: run `npm test` (273+ pass), `npx tsc --noEmit` (0 errors); smoke tests `quickstart.md Test 5` (Rust skipped) and `quickstart.md Test 6` (Python `test_math.py` naming)' to [x]",
            "dependencies": [
              "T022",
              "T017",
              "T020",
              "T014",
              "T021"
            ]
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 6 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      },
      {
        "wave_id": 7,
        "strategy": "SEQUENTIAL_MERGE",
        "rationale": "Wave 7: 1 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T010",
            "agent_role": "Developer",
            "instruction": "T010 [US1] Implement `findExistingTests(targetFile: string, workingDir: string): Promise<string | null>` (EXPORTED) in `src/helpers/test-generator.ts` \u2014 resolves absolute path, checks for `.test.{ext}`, `.spec.{ext}`, `test_{name}.{ext}`, `{name}_spec.{ext}` patterns in same directory; returns found path or null; `.rs` files always return null",
            "file_locks": [
              "src/helpers/test-generator.ts"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T010 [US1] Implement `findExistingTests(targetFile: string, workingDir: string): Promise<string | null>` (EXPORTED) in `src/helpers/test-generator.ts` \u2014 resolves absolute path, checks for `.test.{ext}`, `.spec.{ext}`, `test_{name}.{ext}`, `{name}_spec.{ext}` patterns in same directory; returns found path or null; `.rs` files always return null' to [x]",
            "dependencies": [
              "T005",
              "T004",
              "T007",
              "T003",
              "T002",
              "T006"
            ]
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 7 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      },
      {
        "wave_id": 8,
        "strategy": "SEQUENTIAL_MERGE",
        "rationale": "Wave 8: 1 independent task(s) with no file conflicts",
        "tasks": [
          {
            "task_id": "T011",
            "agent_role": "Developer",
            "instruction": "T011 [US1] Implement `generateTestFile(options: TestGeneratorOptions): Promise<TestGeneratorResult>` (EXPORTED) in `src/helpers/test-generator.ts` \u2014 calls `resolveTestFilePath` (throws if null), reads source file, calls `gatherExampleTests`, reads `package.json`, calls `buildGenerationMessages`, calls `new ProviderRouter().complete({provider:'anthropic', model, messages, temperature:0.7, maxTokens:4096})`, extracts code block, writes file, returns result with `buildTestCommand` output",
            "file_locks": [
              "src/helpers/test-generator.ts",
              "package.json"
            ],
            "constitution_rules": [],
            "completion_handshake": "Upon success, update tasks.md line containing 'T011 [US1] Implement `generateTestFile(options: TestGeneratorOptions): Promise<TestGeneratorResult>` (EXPORTED) in `src/helpers/test-generator.ts` \u2014 calls `resolveTestFilePath` (throws if null), reads source file, calls `gatherExampleTests`, reads `package.json`, calls `buildGenerationMessages`, calls `new ProviderRouter().complete({provider:'anthropic', model, messages, temperature:0.7, maxTokens:4096})`, extracts code block, writes file, returns result with `buildTestCommand` output' to [x]",
            "dependencies": [
              "T005",
              "T009",
              "T004",
              "T007",
              "T003",
              "T002",
              "T010",
              "T006"
            ]
          }
        ],
        "checkpoint_after": {
          "enabled": true,
          "verification_criteria": "Verify all Wave 8 tasks are marked [x] in tasks.md",
          "git_agent": "git-version-manager",
          "memory_bank_agent": "memory-bank-keeper"
        }
      }
    ]
  }
}